---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('articles');
  return entries.map((entry) => ({
    params: { slug: entry.slug.split('/') },
    props: { entry }
  }));
}

const { entry } = Astro.props as { entry: CollectionEntry<'articles'> };
const bg = entry.data.bg || '#0b1220';
const { Content } = await entry.render();
---
<html style={`--page-bg:${bg}`}>
  <body style="background:var(--page-bg); color: white; margin: 0;">
    <main style="max-width: 780px; margin: 2rem auto; padding: 0 1rem;">
      <h1>{entry.data.title}</h1>
      <article><Content /></article>
    </main>
  </body>
</html>
