---
import { getCollection } from 'astro:content';
const all = await getCollection('articles');
const slug = Astro.params.slug?.join('/') || '';
const entry = all.find(a => a.slug === slug);
if (!entry) throw new Error('Not found');
const bg = entry.data.bg || '#0b1220';
const { Content } = await entry.render();
---
<html style={`--page-bg:${bg}`}>
  <body style="background:var(--page-bg); color: white; margin: 0;">
    <main style="max-width: 780px; margin: 2rem auto; padding: 0 1rem;">
      <h1>{entry.data.title}</h1>
      <article><Content /></article>
    </main>
  </body>
</html>
